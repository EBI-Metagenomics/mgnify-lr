# Docker container for Racon

FROM ubuntu:latest AS builder

# dependencies
ENV DEBIAN_FRONTEND noninteractive
RUN apt update && \
    apt upgrade -y && \
    apt install -y \
        build-essential \
        cmake \
        git

RUN mkdir /work
WORKDIR /work

# compiling racon
RUN git clone --recursive https://github.com/lbcb-sci/racon.git racon && \
    mkdir racon/build && \
    cd racon/build && \
    cmake -DCMAKE_BUILD_TYPE=Release ..  && \
    make

# running container
FROM ubuntu:latest  

COPY --from=builder /work/racon/build/bin/* /usr/local/bin

RUN mkdir /data
WORKDIR /data

LABEL software="racon"
LABEL software.version="1.4.13"
LABEL description="Racon is intended as a standalone consensus module to correct raw contigs generated by rapid assembly methods which do not include a consensus step."
LABEL website="https://github.com/lbcb-sci/racon"
LABEL license="https://github.com/lbcb-sci/racon/blob/master/LICENSE"

CMD [ "/bin/bash", "-c" ]  